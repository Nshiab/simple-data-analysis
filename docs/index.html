<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Simple-data-analysis - v3.12.2</title><meta name="description" content="Documentation for Simple-data-analysis"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Simple-data-analysis - v3.12.2</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>Simple-data-analysis - v3.12.2</h2></div><div class="tsd-panel tsd-typography"><a id="md:simple-data-analysis-sda" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Simple data analysis (SDA)<a href="#md:simple-data-analysis-sda" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>SDA is an easy-to-use and high-performance JavaScript library for data analysis. You can use it with tabular and geospatial data.</p>
<p>The library is available on <a href="https://www.npmjs.com/package/simple-data-analysis" target="_blank" class="external">NPM</a> and <a href="https://jsr.io/@nshiab/simple-data-analysis" target="_blank" class="external">JSR</a>. The documentation is available on <a href="https://nshiab.github.io/simple-data-analysis/" target="_blank" class="external">Github</a> and <a href="https://jsr.io/@nshiab/simple-data-analysis/doc" target="_blank" class="external">JSR</a>.</p>
<p>The library is maintained by <a href="http://naelshiab.com/" target="_blank" class="external">Nael Shiab</a>, computational journalist and senior data producer for <a href="https://www.cbc.ca/news" target="_blank" class="external">CBC News</a>.</p>
<p>To use the library in your browser, check out <a href="https://github.com/nshiab/simple-data-analysis-flow" target="_blank" class="external">simple-data-analysis-flow</a>. You might also find the <a href="https://github.com/nshiab/journalism" target="_blank" class="external">journalism library</a> and <a href="https://github.com/nshiab/code-like-a-journalist" target="_blank" class="external">Code Like a Journalist</a> interesting.</p>
<a id="md:quick-setup" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Quick setup<a href="#md:quick-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Create a folder and run <a href="https://github.com/nshiab/setup-sda" target="_blank" class="external">setup-sda</a>:</p>
<pre><code class="bash"><span class="hl-0"># Node.js &gt;= 22.6.x</span><br/><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">setup-sda</span><br/><br/><span class="hl-0"># Bun</span><br/><span class="hl-1">bunx</span><span class="hl-2"> </span><span class="hl-4">--bun</span><span class="hl-2"> </span><span class="hl-3">setup-sda</span><br/><br/><span class="hl-0"># Deno &gt;= 2.x.x</span><br/><span class="hl-1">deno</span><span class="hl-2"> </span><span class="hl-4">-A</span><span class="hl-2"> </span><span class="hl-3">jsr:@nshiab/setup-sda</span>
</code><button type="button">Copy</button></pre>

<p>If you want to use SDA with <a href="https://github.com/observablehq/framework" target="_blank" class="external">Framework</a>, pass the <code>--framework</code> flag:</p>
<pre><code class="bash"><span class="hl-0"># Node.js &gt;= 22.6.x</span><br/><span class="hl-1">npx</span><span class="hl-2"> </span><span class="hl-3">setup-sda</span><span class="hl-2"> </span><span class="hl-4">--framework</span><br/><br/><span class="hl-0"># Bun</span><br/><span class="hl-1">bunx</span><span class="hl-2"> </span><span class="hl-4">--bun</span><span class="hl-2"> </span><span class="hl-3">setup-sda</span><span class="hl-2"> </span><span class="hl-4">--framework</span><br/><br/><span class="hl-0"># Deno &gt;= 2.x.x</span><br/><span class="hl-1">deno</span><span class="hl-2"> </span><span class="hl-4">-A</span><span class="hl-2"> </span><span class="hl-3">jsr:@nshiab/setup-sda</span><span class="hl-2"> </span><span class="hl-4">--framework</span>
</code><button type="button">Copy</button></pre>

<p>To also initialize a git repository, pass the --git flag.</p>
<a id="md:manual-installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Manual installation<a href="#md:manual-installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you want to add the library to an existing project, here's how.</p>
<pre><code class="bash"><span class="hl-0"># Deno &gt;= 2.x.x</span><br/><span class="hl-1">deno</span><span class="hl-2"> </span><span class="hl-3">install</span><span class="hl-2"> </span><span class="hl-4">--node-modules-dir=auto</span><span class="hl-2"> </span><span class="hl-4">--allow-scripts=npm:duckdb</span><span class="hl-2"> </span><span class="hl-3">jsr:@nshiab/simple-data-analysis</span><br/><br/><span class="hl-0"># To run with Deno</span><br/><span class="hl-1">deno</span><span class="hl-2"> </span><span class="hl-3">run</span><span class="hl-2"> </span><span class="hl-4">--node-modules-dir=auto</span><span class="hl-2"> </span><span class="hl-4">-A</span><span class="hl-2"> </span><span class="hl-3">main.ts</span><br/><br/><span class="hl-0"># Node.js</span><br/><span class="hl-1">npm</span><span class="hl-2"> </span><span class="hl-3">i</span><span class="hl-2"> </span><span class="hl-3">simple-data-analysis</span><br/><br/><span class="hl-0"># Bun</span><br/><span class="hl-1">bun</span><span class="hl-2"> </span><span class="hl-3">add</span><span class="hl-2"> </span><span class="hl-3">simple-data-analysis</span>
</code><button type="button">Copy</button></pre>

<a id="md:core-principles" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Core principles<a href="#md:core-principles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>SDA is born out of the frustration of switching between Python, R, and JavaScript to produce data journalism projects. Usually, data crunching and analysis are done with Python or R, and interactive data visualizations are coded in JavaScript. However, being proficient in multiple programming languages is hard. Why can't we do everything in JS?</p>
<p>The missing piece in the JavaScript/TypeScript ecosystem was an easy-to-use and performant library for data analysis. This is why SDA was created.</p>
<p>The library is based on <a href="https://duckdb.org/" target="_blank" class="external">DuckDB</a>, a fast in-process analytical database. Under the hood, SDA sends SQL queries to be executed by DuckDB. We use <a href="https://github.com/duckdb/duckdb-node" target="_blank" class="external">duckdb-node</a> and <a href="https://github.com/duckdb/duckdb-wasm" target="_blank" class="external">duckdb-wasm</a>. This means SDA can run in the browser and with Node.js and other runtimes. For geospatial computations, we rely on the <a href="https://github.com/duckdb/duckdb_spatial" target="_blank" class="external">duckdb_spatial</a> extension.</p>
<p>The syntax and the available methods were inspired by <a href="https://github.com/pandas-dev/pandas" target="_blank" class="external">Pandas</a> (Python) and the <a href="https://www.tidyverse.org/" target="_blank" class="external">Tidyverse</a> (R).</p>
<p>You can also write your own SQL queries if you want to (check the <a href="https://nshiab.github.io/simple-data-analysis/classes/SimpleWebDB.html#customQuery" target="_blank" class="external">customQuery method</a>) or use JavaScript to process your data (check the <a href="https://nshiab.github.io/simple-data-analysis/classes/SimpleWebTable.html#updateWithJS" target="_blank" class="external">updateWithJS method</a>).</p>
<p>Feel free to start a conversation or open an issue. Check how you can <a href="https://github.com/nshiab/simple-data-analysis/blob/main/CONTRIBUTING.md" target="_blank" class="external">contribute</a>.</p>
<a id="md:performance" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Performance<a href="#md:performance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To test and compare the library's performance, we calculated the average temperature per decade and city with the daily temperatures from the <a href="https://api.weather.gc.ca/collections/ahccd-annual" target="_blank" class="external">Adjusted and Homogenized Canadian Climate Data</a>. See <a href="https://github.com/nshiab/simple-data-analysis-benchmarks" target="_blank" class="external">this repository</a> for the code.</p>
<p>We ran the same calculations with <strong>simple-data-analysis@3.0.0</strong> (both Node.js and Bun), <strong>Pandas (Python)</strong>, and the <strong>tidyverse (R)</strong>.</p>
<p>In each script, we:</p>
<ol>
<li>Loaded a CSV file (<em>Importing</em>)</li>
<li>Selected four columns, removed rows with missing temperature, converted date strings to date and temperature strings to float (<em>Cleaning</em>)</li>
<li>Added a new column <em>decade</em> and calculated the decade (<em>Modifying</em>)</li>
<li>Calculated the average temperature per decade and city (<em>Summarizing</em>)</li>
<li>Wrote the cleaned-up data that we computed the averages from in a new CSV file (<em>Writing</em>)</li>
</ol>
<p>Each script has been run ten times on a MacBook Pro (Apple M1 Pro / 16 GB).</p>
<a id="md:small-file" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Small file<a href="#md:small-file" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>With <em>ahccd-samples.csv</em>:</p>
<ul>
<li>74.7 MB</li>
<li>19 cities</li>
<li>20 columns</li>
<li>971,804 rows</li>
<li>19,436,080 data points</li>
</ul>
<p><strong>simple-data-analysis@3.0.0</strong> is the fastest, but if we skip writing the CSV file, the <strong>tidyverse</strong> shows impressive speed with small files.</p>
<p><img src="media/small-file.png" alt="A chart showing the processing duration of multiple scripts in various languages"></p>
<a id="md:big-file" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Big file<a href="#md:big-file" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>With <em>ahccd.csv</em>:</p>
<ul>
<li>1.7 GB</li>
<li>773 cities</li>
<li>20 columns</li>
<li>22,051,025 rows</li>
<li>441,020,500 data points</li>
</ul>
<p>Thanks to DuckDB, <strong>simple-data-analysis@3.0.0</strong> really shines with big files. It's the fastest option.</p>
<p><img src="media/big-file.png" alt="A chart showing the processing duration of multiple scripts in various languages"></p>
<p>We also tried the One Billion Row Challenge, which involves computing the min, mean, and max temperatures for hundreds of cities in a 1,000,000,000 rows CSV file. The library has been able to crunch the numbers in 1 minute 32 seconds on the same computer (Apple M1 Pro / 16 GB). For more, check this <a href="https://github.com/nshiab/1brc" target="_blank" class="external">repo</a> forked from this <a href="https://github.com/gunnarmorling/1brc" target="_blank" class="external">one</a>. The JavaScript code is <a href="https://github.com/nshiab/1brc/blob/main/index.js" target="_blank" class="external">here</a>.</p>
<p>Note that DuckDB, which powers SDA, can also be used with <a href="https://duckdb.org/docs/api/python/overview.html" target="_blank" class="external">Python</a> and <a href="https://duckdb.org/docs/api/r" target="_blank" class="external">R</a>.</p>
<a id="md:example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Example<a href="#md:example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In this example, we load a CSV file with the latitude and longitude of 2023 wildfires in Canada, create point geometries from it, do a spatial join with provinces' boundaries, and then compute the number of fires and the total area burnt per province.</p>
<p>If you are using Deno, make sure to switch the first line to <code>import { SimpleDB } from &quot;@nshiab/simple-data-analysis&quot;;</code> and to enable the <a href="https://docs.deno.com/runtime/getting_started/setup_your_environment/" target="_blank" class="external">Deno extension</a>.</p>
<pre><code class="ts"><span class="hl-5">import</span><span class="hl-2"> { </span><span class="hl-6">SimpleDB</span><span class="hl-2"> } </span><span class="hl-5">from</span><span class="hl-2"> </span><span class="hl-3">&quot;simple-data-analysis&quot;</span><br/><br/><span class="hl-0">// We enable the cacheVerbose option, which will</span><br/><span class="hl-0">// log information about the cached data.</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">sdb</span><span class="hl-2"> = </span><span class="hl-4">new</span><span class="hl-2"> </span><span class="hl-1">SimpleDB</span><span class="hl-2">({ </span><span class="hl-6">cacheVerbose:</span><span class="hl-2"> </span><span class="hl-4">true</span><span class="hl-2"> })</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">fires</span><span class="hl-2"> = </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">newTable</span><span class="hl-2">(</span><span class="hl-3">&quot;fires&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// We cache these steps with a ttl of 60 seconds.</span><br/><span class="hl-0">// On the first run, the data will be fetched</span><br/><span class="hl-0">// and stored in the hidden folder .sda-cache.</span><br/><span class="hl-0">// If you rerun the script less than 60 seconds</span><br/><span class="hl-0">// later, the data won&#39;t be fetched but loaded</span><br/><span class="hl-0">// from the local cache. However, if you run the</span><br/><span class="hl-0">// code after 60 seconds, the data will be</span><br/><span class="hl-0">// considered outdated and fetched again.</span><br/><span class="hl-0">// After another 60 seconds, the new data in the cache will</span><br/><span class="hl-0">// expire again. This is useful when working with scraped data.</span><br/><span class="hl-0">// If you update the parameters or code passed to the cache</span><br/><span class="hl-0">// method, everything starts over.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">cache</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-4">async</span><span class="hl-2"> () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">loadData</span><span class="hl-2">(</span><br/><span class="hl-2">            </span><span class="hl-3">&quot;https://raw.githubusercontent.com/nshiab/simple-data-analysis/main/test/geodata/files/firesCanada2023.csv&quot;</span><br/><span class="hl-2">        )</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">points</span><span class="hl-2">(</span><span class="hl-3">&quot;lat&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;lon&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;geom&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    { </span><span class="hl-6">ttl:</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> }</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">provinces</span><span class="hl-2"> = </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">newTable</span><span class="hl-2">(</span><span class="hl-3">&quot;provinces&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// Same thing here, except there is no ttl option,</span><br/><span class="hl-0">// so the cached data will never expire unless you delete</span><br/><span class="hl-0">// the hidden folder .sda-cache. Again, if you update</span><br/><span class="hl-0">// the code passed to the cache method, everything</span><br/><span class="hl-0">// starts over.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-1">cache</span><span class="hl-2">(</span><span class="hl-4">async</span><span class="hl-2"> () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-1">loadGeoData</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-3">&quot;https://raw.githubusercontent.com/nshiab/simple-data-analysis/main/test/geodata/files/CanadianProvincesAndTerritories.json&quot;</span><br/><span class="hl-2">    )</span><br/><span class="hl-2">})</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">firesInsideProvinces</span><span class="hl-2"> = </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">newTable</span><span class="hl-2">(</span><span class="hl-3">&quot;firesInsideProvinces&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// While caching is quite useful when fetching data,</span><br/><span class="hl-0">// it&#39;s also handy for computationally expensive</span><br/><span class="hl-0">// operations like joins and summaries.</span><br/><span class="hl-0">// Since the fires table has a ttl of 60 seconds</span><br/><span class="hl-0">// and we depend on it here, we need a ttl equal</span><br/><span class="hl-0">// or lower. Otherwise, we won&#39;t work with</span><br/><span class="hl-0">// up-to-date data.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">cache</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-4">async</span><span class="hl-2"> () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">joinGeo</span><span class="hl-2">(</span><span class="hl-6">provinces</span><span class="hl-2">, </span><span class="hl-3">&quot;inside&quot;</span><span class="hl-2">, {</span><br/><span class="hl-2">            </span><span class="hl-6">outputTable:</span><span class="hl-2"> </span><span class="hl-3">&quot;firesInsideProvinces&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">removeMissing</span><span class="hl-2">()</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">summarize</span><span class="hl-2">({</span><br/><span class="hl-2">            </span><span class="hl-6">values:</span><span class="hl-2"> </span><span class="hl-3">&quot;hectares&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">categories:</span><span class="hl-2"> </span><span class="hl-3">&quot;nameEnglish&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">summaries:</span><span class="hl-2"> [</span><span class="hl-3">&quot;count&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;sum&quot;</span><span class="hl-2">],</span><br/><span class="hl-2">            </span><span class="hl-6">decimals:</span><span class="hl-2"> </span><span class="hl-8">0</span><span class="hl-2">,</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">renameColumns</span><span class="hl-2">({</span><br/><span class="hl-2">            </span><span class="hl-6">count:</span><span class="hl-2"> </span><span class="hl-3">&quot;nbFires&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">sum:</span><span class="hl-2"> </span><span class="hl-3">&quot;burntArea&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">sort</span><span class="hl-2">({ </span><span class="hl-6">burntArea:</span><span class="hl-2"> </span><span class="hl-3">&quot;desc&quot;</span><span class="hl-2"> })</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    { </span><span class="hl-6">ttl:</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> }</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">logTable</span><span class="hl-2">(</span><span class="hl-8">12</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// It&#39;s important to call done() at the end.</span><br/><span class="hl-0">// This method will remove the unused files</span><br/><span class="hl-0">// in the cache. It will also log the total duration</span><br/><span class="hl-0">// if the logDuration option was set to true.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">done</span><span class="hl-2">()</span>
</code><button type="button">Copy</button></pre>

<p>Here's what you should see in your console if your run this scripts.</p>
<p><img src="media/nodejs-console-with-chart.png" alt="The console tab in VS Code showing the result of simple-data-analysis computations."></p>
<a id="md:caching-fetched-and-computed-data" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Caching fetched and computed data<a href="#md:caching-fetched-and-computed-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Instead of running the same code over and over again, you can cache the results. This can speed up your workflow, especially when fetching data or performing computationally expensive operations.</p>
<p>Here's the previous example adapted to cache data. For more information, check the <a href="https://nshiab.github.io/simple-data-analysis/classes/SimpleTable.html#cache" target="_blank" class="external">cache method documentation</a>.</p>
<p>The data is cached in the hidden folder <code>.sda-cache</code> at the root of your code repository. Make sure to add it to your <code>.gitignore</code>. If you want to clean your cache, just delete the folder.</p>
<p>If you set up with <code>setup-sda</code> (see <em>Quick setup</em> at the top), <code>.sda-cache</code> is automatically added to your <code>.gitignore</code> and you can use <code>npm run clean</code> or <code>bun run clean</code> or <code>deno task clean</code> to clear the cache.</p>
<pre><code class="ts"><span class="hl-5">import</span><span class="hl-2"> { </span><span class="hl-6">SimpleDB</span><span class="hl-2"> } </span><span class="hl-5">from</span><span class="hl-2"> </span><span class="hl-3">&quot;simple-data-analysis&quot;</span><br/><br/><span class="hl-0">// We enable two options to make our lives easier.</span><br/><span class="hl-0">// cacheVerbose will log information about the cached</span><br/><span class="hl-0">// data, and logDuration will log the total duration between</span><br/><span class="hl-0">// the creation of this SimpleDB instance and its last operation.</span><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">sdb</span><span class="hl-2"> = </span><span class="hl-4">new</span><span class="hl-2"> </span><span class="hl-1">SimpleDB</span><span class="hl-2">({ </span><span class="hl-6">cacheVerbose:</span><span class="hl-2"> </span><span class="hl-4">true</span><span class="hl-2">, </span><span class="hl-6">logDuration:</span><span class="hl-2"> </span><span class="hl-4">true</span><span class="hl-2"> })</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">fires</span><span class="hl-2"> = </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">newTable</span><span class="hl-2">(</span><span class="hl-3">&quot;fires&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// We cache these steps with a ttl of 60 seconds.</span><br/><span class="hl-0">// On the first run, the data will be fetched</span><br/><span class="hl-0">// and stored in the hidden folder .sda-cache.</span><br/><span class="hl-0">// If you rerun the script less than 60 seconds</span><br/><span class="hl-0">// later, the data won&#39;t be fetched but loaded</span><br/><span class="hl-0">// from the local cache. However, if you run the</span><br/><span class="hl-0">// code after 60 seconds, the data will be</span><br/><span class="hl-0">// considered outdated and fetched again.</span><br/><span class="hl-0">// After another 60 seconds, the new data in the cache will</span><br/><span class="hl-0">// expire again. This is useful when working with scraped data.</span><br/><span class="hl-0">// If you update the code passed to the cache method,</span><br/><span class="hl-0">// everything starts over.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">cache</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-4">async</span><span class="hl-2"> () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">loadData</span><span class="hl-2">(</span><br/><span class="hl-2">            </span><span class="hl-3">&quot;https://raw.githubusercontent.com/nshiab/simple-data-analysis/main/test/geodata/files/firesCanada2023.csv&quot;</span><br/><span class="hl-2">        )</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">points</span><span class="hl-2">(</span><span class="hl-3">&quot;lat&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;lon&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;geom&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    { </span><span class="hl-6">ttl:</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> }</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">provinces</span><span class="hl-2"> = </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">newTable</span><span class="hl-2">(</span><span class="hl-3">&quot;provinces&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// Same thing here, except there is no ttl option,</span><br/><span class="hl-0">// so the cached data will never expire unless you delete</span><br/><span class="hl-0">// the hidden folder .sda-cache. Again, if you update</span><br/><span class="hl-0">// the code passed to the cache method, everything</span><br/><span class="hl-0">// starts over.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-1">cache</span><span class="hl-2">(</span><span class="hl-4">async</span><span class="hl-2"> () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-1">loadGeoData</span><span class="hl-2">(</span><br/><span class="hl-2">        </span><span class="hl-3">&quot;https://raw.githubusercontent.com/nshiab/simple-data-analysis/main/test/geodata/files/CanadianProvincesAndTerritories.json&quot;</span><br/><span class="hl-2">    )</span><br/><span class="hl-2">})</span><br/><br/><span class="hl-4">const</span><span class="hl-2"> </span><span class="hl-7">firesInsideProvinces</span><span class="hl-2"> = </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">newTable</span><span class="hl-2">(</span><span class="hl-3">&quot;firesInsideProvinces&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// While caching is quite useful when fetching data,</span><br/><span class="hl-0">// it&#39;s also handy for computationally expensive</span><br/><span class="hl-0">// operations like joins and summaries.</span><br/><span class="hl-0">// Since the fires table has a ttl of 60 seconds</span><br/><span class="hl-0">// and we depend on it here, we need a ttl equal</span><br/><span class="hl-0">// or lower. Otherwise, we won&#39;t work with</span><br/><span class="hl-0">// up-to-date data.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">cache</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-4">async</span><span class="hl-2"> () </span><span class="hl-4">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-1">joinGeo</span><span class="hl-2">(</span><span class="hl-6">provinces</span><span class="hl-2">, </span><span class="hl-3">&quot;inside&quot;</span><span class="hl-2">, {</span><br/><span class="hl-2">            </span><span class="hl-6">outputTable:</span><span class="hl-2"> </span><span class="hl-3">&quot;firesInsideProvinces&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">removeMissing</span><span class="hl-2">()</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">summarize</span><span class="hl-2">({</span><br/><span class="hl-2">            </span><span class="hl-6">values:</span><span class="hl-2"> </span><span class="hl-3">&quot;hectares&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">categories:</span><span class="hl-2"> </span><span class="hl-3">&quot;nameEnglish&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">summaries:</span><span class="hl-2"> [</span><span class="hl-3">&quot;count&quot;</span><span class="hl-2">, </span><span class="hl-3">&quot;sum&quot;</span><span class="hl-2">],</span><br/><span class="hl-2">            </span><span class="hl-6">decimals:</span><span class="hl-2"> </span><span class="hl-8">0</span><span class="hl-2">,</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">renameColumns</span><span class="hl-2">({</span><br/><span class="hl-2">            </span><span class="hl-6">count:</span><span class="hl-2"> </span><span class="hl-3">&quot;nbFires&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">sum:</span><span class="hl-2"> </span><span class="hl-3">&quot;burntArea&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">        </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">sort</span><span class="hl-2">({ </span><span class="hl-6">burntArea:</span><span class="hl-2"> </span><span class="hl-3">&quot;desc&quot;</span><span class="hl-2"> })</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    { </span><span class="hl-6">ttl:</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> }</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-1">logTable</span><span class="hl-2">(</span><span class="hl-8">12</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// It&#39;s important to call done() at the end.</span><br/><span class="hl-0">// This method will remove the unused files</span><br/><span class="hl-0">// in the cache. It will also log the total duration</span><br/><span class="hl-0">// if the logDuration option was set to true.</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">sdb</span><span class="hl-2">.</span><span class="hl-1">done</span><span class="hl-2">()</span>
</code><button type="button">Copy</button></pre>

<p>After the first run, here's what you'll see in your terminal. For each <code>cache()</code>, a file storing the results has been written in <code>.sda-cache</code>.</p>
<p>The whole script took around a second to complete.</p>
<pre><code><span class="hl-6">Nothing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">and</span><span class="hl-2"> </span><span class="hl-6">storing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-9">Duration</span><span class="hl-2">: </span><span class="hl-8">311</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Wrote</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-6">ff</span><span class="hl-2">...68</span><span class="hl-6">f</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2">.</span><br/><br/><span class="hl-6">Nothing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">and</span><span class="hl-2"> </span><span class="hl-6">storing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-9">Duration</span><span class="hl-2">: </span><span class="hl-8">397</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Wrote</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-8">42.</span><span class="hl-2">.</span><span class="hl-8">.55</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2">.</span><br/><br/><span class="hl-6">Nothing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">and</span><span class="hl-2"> </span><span class="hl-6">storing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-9">Duration</span><span class="hl-2">: </span><span class="hl-8">49</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Wrote</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-8">71.</span><span class="hl-2">..</span><span class="hl-6">a8</span><span class="hl-2">.</span><span class="hl-6">parquet</span><span class="hl-2">.</span><br/><br/><span class="hl-6">table</span><span class="hl-2"> </span><span class="hl-9">firesInsideProvinces</span><span class="hl-2">:</span><br/><span class="hl-2">┌─────────┬────────────┬─────────────────────────────┬─────────┬───────────┐</span><br/><span class="hl-2">│ (</span><span class="hl-6">index</span><span class="hl-2">) │ </span><span class="hl-6">value</span><span class="hl-2">      │ </span><span class="hl-6">nameEnglish</span><span class="hl-2">                 │ </span><span class="hl-6">nbFires</span><span class="hl-2"> │ </span><span class="hl-6">burntArea</span><span class="hl-2"> │</span><br/><span class="hl-2">├─────────┼────────────┼─────────────────────────────┼─────────┼───────────┤</span><br/><span class="hl-2">│ </span><span class="hl-8">0</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Quebec&#39;</span><span class="hl-2">                    │ </span><span class="hl-8">706</span><span class="hl-2">     │ </span><span class="hl-8">5024737</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">1</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Northwest Territories&#39;</span><span class="hl-2">     │ </span><span class="hl-8">314</span><span class="hl-2">     │ </span><span class="hl-8">4253907</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">2</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Alberta&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">1208</span><span class="hl-2">    │ </span><span class="hl-8">3214444</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">3</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;British Columbia&#39;</span><span class="hl-2">          │ </span><span class="hl-8">2496</span><span class="hl-2">    │ </span><span class="hl-8">2856625</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">4</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Saskatchewan&#39;</span><span class="hl-2">              │ </span><span class="hl-8">560</span><span class="hl-2">     │ </span><span class="hl-8">1801903</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">5</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Ontario&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">741</span><span class="hl-2">     │ </span><span class="hl-8">441581</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">6</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Yukon&#39;</span><span class="hl-2">                     │ </span><span class="hl-8">227</span><span class="hl-2">     │ </span><span class="hl-8">395461</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">7</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Manitoba&#39;</span><span class="hl-2">                  │ </span><span class="hl-8">301</span><span class="hl-2">     │ </span><span class="hl-8">199200</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">8</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Nova Scotia&#39;</span><span class="hl-2">               │ </span><span class="hl-8">208</span><span class="hl-2">     │ </span><span class="hl-8">25017</span><span class="hl-2">     │</span><br/><span class="hl-2">│ </span><span class="hl-8">9</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Newfoundland and Labrador&#39;</span><span class="hl-2"> │ </span><span class="hl-8">85</span><span class="hl-2">      │ </span><span class="hl-8">21833</span><span class="hl-2">     │</span><br/><span class="hl-2">│ </span><span class="hl-8">10</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Nunavut&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">1</span><span class="hl-2">       │ </span><span class="hl-8">2700</span><span class="hl-2">      │</span><br/><span class="hl-2">│ </span><span class="hl-8">11</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;New Brunswick&#39;</span><span class="hl-2">             │ </span><span class="hl-8">202</span><span class="hl-2">     │ </span><span class="hl-8">854</span><span class="hl-2">       │</span><br/><span class="hl-2">│ </span><span class="hl-8">12</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-4">null</span><span class="hl-2">                        │ </span><span class="hl-8">124</span><span class="hl-2">     │ </span><span class="hl-8">258</span><span class="hl-2">       │</span><br/><span class="hl-2">└─────────┴────────────┴─────────────────────────────┴─────────┴───────────┘</span><br/><span class="hl-8">13</span><span class="hl-2"> </span><span class="hl-6">rows</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-1">total</span><span class="hl-2"> (</span><span class="hl-6">nbRowsToLog</span><span class="hl-2">: </span><span class="hl-8">13</span><span class="hl-2">)</span><br/><br/><span class="hl-6">SimpleDB</span><span class="hl-2"> - </span><span class="hl-6">Done</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">891</span><span class="hl-2"> </span><span class="hl-6">ms</span>
</code><button>Copy</button></pre>

<p>If you run the script less than 60 seconds after the first run, here's what you'll see.</p>
<p>Thanks to caching, the script ran five times faster!</p>
<pre><code><span class="hl-6">Found</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-6">ff</span><span class="hl-2">...8</span><span class="hl-6">f</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-6">ttl</span><span class="hl-2"> </span><span class="hl-4">of</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> </span><span class="hl-6">sec</span><span class="hl-2"> </span><span class="hl-6">has</span><span class="hl-2"> </span><span class="hl-6">not</span><span class="hl-2"> </span><span class="hl-6">expired</span><span class="hl-2">. </span><span class="hl-6">The</span><span class="hl-2"> </span><span class="hl-6">creation</span><span class="hl-2"> </span><span class="hl-6">date</span><span class="hl-2"> </span><span class="hl-6">is</span><span class="hl-2"> </span><span class="hl-6">July</span><span class="hl-2"> </span><span class="hl-8">5</span><span class="hl-2">, </span><span class="hl-8">2024</span><span class="hl-2">, </span><span class="hl-6">at</span><span class="hl-2"> </span><span class="hl-8">4</span><span class="hl-2">:</span><span class="hl-8">25</span><span class="hl-2"> </span><span class="hl-6">p</span><span class="hl-2">.</span><span class="hl-6">m</span><span class="hl-2">.. </span><span class="hl-6">There</span><span class="hl-2"> </span><span class="hl-6">are</span><span class="hl-2"> </span><span class="hl-8">11</span><span class="hl-2"> </span><span class="hl-6">sec</span><span class="hl-2">, </span><span class="hl-8">491</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">left</span><span class="hl-2">.</span><br/><span class="hl-6">Data</span><span class="hl-2"> </span><span class="hl-6">loaded</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">151</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">the</span><span class="hl-2"> </span><span class="hl-6">computations</span><span class="hl-2"> </span><span class="hl-6">took</span><span class="hl-2"> </span><span class="hl-8">311</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">last</span><span class="hl-2"> </span><span class="hl-6">time</span><span class="hl-2">. </span><span class="hl-6">You</span><span class="hl-2"> </span><span class="hl-6">saved</span><span class="hl-2"> </span><span class="hl-8">160</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">.</span><br/><br/><span class="hl-6">Found</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-8">42.</span><span class="hl-2">.</span><span class="hl-8">.55</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-6">Data</span><span class="hl-2"> </span><span class="hl-6">loaded</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">8</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">the</span><span class="hl-2"> </span><span class="hl-6">computations</span><span class="hl-2"> </span><span class="hl-6">took</span><span class="hl-2"> </span><span class="hl-8">397</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">last</span><span class="hl-2"> </span><span class="hl-6">time</span><span class="hl-2">. </span><span class="hl-6">You</span><span class="hl-2"> </span><span class="hl-6">saved</span><span class="hl-2"> </span><span class="hl-8">389</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">.</span><br/><br/><span class="hl-6">Found</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-8">71.</span><span class="hl-2">..</span><span class="hl-6">a8</span><span class="hl-2">.</span><span class="hl-6">parquet</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-6">ttl</span><span class="hl-2"> </span><span class="hl-4">of</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> </span><span class="hl-6">sec</span><span class="hl-2"> </span><span class="hl-6">has</span><span class="hl-2"> </span><span class="hl-6">not</span><span class="hl-2"> </span><span class="hl-6">expired</span><span class="hl-2">. </span><span class="hl-6">The</span><span class="hl-2"> </span><span class="hl-6">creation</span><span class="hl-2"> </span><span class="hl-6">date</span><span class="hl-2"> </span><span class="hl-6">is</span><span class="hl-2"> </span><span class="hl-6">July</span><span class="hl-2"> </span><span class="hl-8">5</span><span class="hl-2">, </span><span class="hl-8">2024</span><span class="hl-2">, </span><span class="hl-6">at</span><span class="hl-2"> </span><span class="hl-8">4</span><span class="hl-2">:</span><span class="hl-8">25</span><span class="hl-2"> </span><span class="hl-6">p</span><span class="hl-2">.</span><span class="hl-6">m</span><span class="hl-2">.. </span><span class="hl-6">There</span><span class="hl-2"> </span><span class="hl-6">are</span><span class="hl-2"> </span><span class="hl-8">11</span><span class="hl-2"> </span><span class="hl-6">sec</span><span class="hl-2">, </span><span class="hl-8">792</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">left</span><span class="hl-2">.</span><br/><span class="hl-6">Data</span><span class="hl-2"> </span><span class="hl-6">loaded</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">1</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">the</span><span class="hl-2"> </span><span class="hl-6">computations</span><span class="hl-2"> </span><span class="hl-6">took</span><span class="hl-2"> </span><span class="hl-8">49</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">last</span><span class="hl-2"> </span><span class="hl-6">time</span><span class="hl-2">. </span><span class="hl-6">You</span><span class="hl-2"> </span><span class="hl-6">saved</span><span class="hl-2"> </span><span class="hl-8">48</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">.</span><br/><br/><span class="hl-6">table</span><span class="hl-2"> </span><span class="hl-9">firesInsideProvinces</span><span class="hl-2">:</span><br/><span class="hl-2">┌─────────┬────────────┬─────────────────────────────┬─────────┬───────────┐</span><br/><span class="hl-2">│ (</span><span class="hl-6">index</span><span class="hl-2">) │ </span><span class="hl-6">value</span><span class="hl-2">      │ </span><span class="hl-6">nameEnglish</span><span class="hl-2">                 │ </span><span class="hl-6">nbFires</span><span class="hl-2"> │ </span><span class="hl-6">burntArea</span><span class="hl-2"> │</span><br/><span class="hl-2">├─────────┼────────────┼─────────────────────────────┼─────────┼───────────┤</span><br/><span class="hl-2">│ </span><span class="hl-8">0</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Quebec&#39;</span><span class="hl-2">                    │ </span><span class="hl-8">706</span><span class="hl-2">     │ </span><span class="hl-8">5024737</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">1</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Northwest Territories&#39;</span><span class="hl-2">     │ </span><span class="hl-8">314</span><span class="hl-2">     │ </span><span class="hl-8">4253907</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">2</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Alberta&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">1208</span><span class="hl-2">    │ </span><span class="hl-8">3214444</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">3</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;British Columbia&#39;</span><span class="hl-2">          │ </span><span class="hl-8">2496</span><span class="hl-2">    │ </span><span class="hl-8">2856625</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">4</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Saskatchewan&#39;</span><span class="hl-2">              │ </span><span class="hl-8">560</span><span class="hl-2">     │ </span><span class="hl-8">1801903</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">5</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Ontario&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">741</span><span class="hl-2">     │ </span><span class="hl-8">441581</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">6</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Yukon&#39;</span><span class="hl-2">                     │ </span><span class="hl-8">227</span><span class="hl-2">     │ </span><span class="hl-8">395461</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">7</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Manitoba&#39;</span><span class="hl-2">                  │ </span><span class="hl-8">301</span><span class="hl-2">     │ </span><span class="hl-8">199200</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">8</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Nova Scotia&#39;</span><span class="hl-2">               │ </span><span class="hl-8">208</span><span class="hl-2">     │ </span><span class="hl-8">25017</span><span class="hl-2">     │</span><br/><span class="hl-2">│ </span><span class="hl-8">9</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Newfoundland and Labrador&#39;</span><span class="hl-2"> │ </span><span class="hl-8">85</span><span class="hl-2">      │ </span><span class="hl-8">21833</span><span class="hl-2">     │</span><br/><span class="hl-2">│ </span><span class="hl-8">10</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Nunavut&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">1</span><span class="hl-2">       │ </span><span class="hl-8">2700</span><span class="hl-2">      │</span><br/><span class="hl-2">│ </span><span class="hl-8">11</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;New Brunswick&#39;</span><span class="hl-2">             │ </span><span class="hl-8">202</span><span class="hl-2">     │ </span><span class="hl-8">854</span><span class="hl-2">       │</span><br/><span class="hl-2">│ </span><span class="hl-8">12</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-4">null</span><span class="hl-2">                        │ </span><span class="hl-8">124</span><span class="hl-2">     │ </span><span class="hl-8">258</span><span class="hl-2">       │</span><br/><span class="hl-2">└─────────┴────────────┴─────────────────────────────┴─────────┴───────────┘</span><br/><span class="hl-8">13</span><span class="hl-2"> </span><span class="hl-6">rows</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-1">total</span><span class="hl-2"> (</span><span class="hl-6">nbRowsToLog</span><span class="hl-2">: </span><span class="hl-8">13</span><span class="hl-2">)</span><br/><br/><span class="hl-6">SimpleDB</span><span class="hl-2"> - </span><span class="hl-6">Done</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">184</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> / </span><span class="hl-6">You</span><span class="hl-2"> </span><span class="hl-6">saved</span><span class="hl-2"> </span><span class="hl-8">707</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">by</span><span class="hl-2"> </span><span class="hl-4">using</span><span class="hl-2"> </span><span class="hl-7">the</span><span class="hl-2"> cache</span>
</code><button>Copy</button></pre>

<p>And if you run the script 60 seconds later, the fires and join/summary caches will have expired, but not the provinces one. Some of the code will have run, but not everything. The script still ran 1.5 times faster. This is quite handy in complex analysis with big datasets. The less you wait, the more fun you have!</p>
<pre><code><span class="hl-6">Found</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-6">ff</span><span class="hl-2">...8</span><span class="hl-6">f</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><br/><span class="hl-6">ttl</span><span class="hl-2"> </span><span class="hl-4">of</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> </span><span class="hl-6">sec</span><span class="hl-2"> </span><span class="hl-6">has</span><span class="hl-2"> </span><span class="hl-6">expired</span><span class="hl-2">. </span><span class="hl-6">The</span><span class="hl-2"> </span><span class="hl-6">creation</span><span class="hl-2"> </span><span class="hl-6">date</span><span class="hl-2"> </span><span class="hl-6">is</span><span class="hl-2"> </span><span class="hl-6">July</span><span class="hl-2"> </span><span class="hl-8">5</span><span class="hl-2">, </span><span class="hl-8">2024</span><span class="hl-2">, </span><span class="hl-6">at</span><span class="hl-2"> </span><span class="hl-8">4</span><span class="hl-2">:</span><span class="hl-8">25</span><span class="hl-2"> </span><span class="hl-6">p</span><span class="hl-2">.</span><span class="hl-6">m</span><span class="hl-2">.. </span><span class="hl-6">It</span><span class="hl-3">&#39;s is 4 min, 1 sec, 172 ms ago</span><span class="hl-10">.</span><br/><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">and</span><span class="hl-2"> </span><span class="hl-6">storing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-9">Duration</span><span class="hl-2">: </span><span class="hl-8">424</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Wrote</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">fires</span><span class="hl-2">.</span><span class="hl-6">ff</span><span class="hl-2">...8</span><span class="hl-6">f</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2">.</span><br/><br/><span class="hl-6">Found</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">provinces</span><span class="hl-2">.</span><span class="hl-8">42.</span><span class="hl-2">.</span><span class="hl-8">.55</span><span class="hl-2">.</span><span class="hl-6">geojson</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-6">Data</span><span class="hl-2"> </span><span class="hl-6">loaded</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">10</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">the</span><span class="hl-2"> </span><span class="hl-6">computations</span><span class="hl-2"> </span><span class="hl-6">took</span><span class="hl-2"> </span><span class="hl-8">397</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">last</span><span class="hl-2"> </span><span class="hl-6">time</span><span class="hl-2">. </span><span class="hl-6">You</span><span class="hl-2"> </span><span class="hl-6">saved</span><span class="hl-2"> </span><span class="hl-8">387</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">.</span><br/><br/><span class="hl-6">Fond</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-8">71.</span><span class="hl-2">..</span><span class="hl-6">a8</span><span class="hl-2">.</span><span class="hl-6">parquet</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><br/><span class="hl-6">ttl</span><span class="hl-2"> </span><span class="hl-4">of</span><span class="hl-2"> </span><span class="hl-8">60</span><span class="hl-2"> </span><span class="hl-6">sec</span><span class="hl-2"> </span><span class="hl-6">has</span><span class="hl-2"> </span><span class="hl-6">expired</span><span class="hl-2">. </span><span class="hl-6">The</span><span class="hl-2"> </span><span class="hl-6">creation</span><span class="hl-2"> </span><span class="hl-6">date</span><span class="hl-2"> </span><span class="hl-6">is</span><span class="hl-2"> </span><span class="hl-6">July</span><span class="hl-2"> </span><span class="hl-8">5</span><span class="hl-2">, </span><span class="hl-8">2024</span><span class="hl-2">, </span><span class="hl-6">at</span><span class="hl-2"> </span><span class="hl-8">4</span><span class="hl-2">:</span><span class="hl-8">25</span><span class="hl-2"> </span><span class="hl-6">p</span><span class="hl-2">.</span><span class="hl-6">m</span><span class="hl-2">.. </span><span class="hl-6">It</span><span class="hl-3">&#39;s is 4 min, 1 sec, 239 ms ago</span><span class="hl-10">.</span><br/><span class="hl-6">Running</span><span class="hl-2"> </span><span class="hl-6">and</span><span class="hl-2"> </span><span class="hl-6">storing</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-6">cache</span><span class="hl-2">.</span><br/><span class="hl-9">Duration</span><span class="hl-2">: </span><span class="hl-8">42</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2">. </span><span class="hl-6">Wrote</span><span class="hl-2"> ./.</span><span class="hl-6">sda</span><span class="hl-2">-</span><span class="hl-6">cache</span><span class="hl-2">/</span><span class="hl-6">firesInsideProvinces</span><span class="hl-2">.</span><span class="hl-8">71.</span><span class="hl-2">..</span><span class="hl-6">a8</span><span class="hl-2">.</span><span class="hl-6">parquet</span><span class="hl-2">.</span><br/><br/><span class="hl-6">table</span><span class="hl-2"> </span><span class="hl-9">firesInsideProvinces</span><span class="hl-2">:</span><br/><span class="hl-2">┌─────────┬────────────┬─────────────────────────────┬─────────┬───────────┐</span><br/><span class="hl-2">│ (</span><span class="hl-6">index</span><span class="hl-2">) │ </span><span class="hl-6">value</span><span class="hl-2">      │ </span><span class="hl-6">nameEnglish</span><span class="hl-2">                 │ </span><span class="hl-6">nbFires</span><span class="hl-2"> │ </span><span class="hl-6">burntArea</span><span class="hl-2"> │</span><br/><span class="hl-2">├─────────┼────────────┼─────────────────────────────┼─────────┼───────────┤</span><br/><span class="hl-2">│ </span><span class="hl-8">0</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Quebec&#39;</span><span class="hl-2">                    │ </span><span class="hl-8">706</span><span class="hl-2">     │ </span><span class="hl-8">5024737</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">1</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Northwest Territories&#39;</span><span class="hl-2">     │ </span><span class="hl-8">314</span><span class="hl-2">     │ </span><span class="hl-8">4253907</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">2</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Alberta&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">1208</span><span class="hl-2">    │ </span><span class="hl-8">3214444</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">3</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;British Columbia&#39;</span><span class="hl-2">          │ </span><span class="hl-8">2496</span><span class="hl-2">    │ </span><span class="hl-8">2856625</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">4</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Saskatchewan&#39;</span><span class="hl-2">              │ </span><span class="hl-8">560</span><span class="hl-2">     │ </span><span class="hl-8">1801903</span><span class="hl-2">   │</span><br/><span class="hl-2">│ </span><span class="hl-8">5</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Ontario&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">741</span><span class="hl-2">     │ </span><span class="hl-8">441581</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">6</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Yukon&#39;</span><span class="hl-2">                     │ </span><span class="hl-8">227</span><span class="hl-2">     │ </span><span class="hl-8">395461</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">7</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Manitoba&#39;</span><span class="hl-2">                  │ </span><span class="hl-8">301</span><span class="hl-2">     │ </span><span class="hl-8">199200</span><span class="hl-2">    │</span><br/><span class="hl-2">│ </span><span class="hl-8">8</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Nova Scotia&#39;</span><span class="hl-2">               │ </span><span class="hl-8">208</span><span class="hl-2">     │ </span><span class="hl-8">25017</span><span class="hl-2">     │</span><br/><span class="hl-2">│ </span><span class="hl-8">9</span><span class="hl-2">       │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Newfoundland and Labrador&#39;</span><span class="hl-2"> │ </span><span class="hl-8">85</span><span class="hl-2">      │ </span><span class="hl-8">21833</span><span class="hl-2">     │</span><br/><span class="hl-2">│ </span><span class="hl-8">10</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;Nunavut&#39;</span><span class="hl-2">                   │ </span><span class="hl-8">1</span><span class="hl-2">       │ </span><span class="hl-8">2700</span><span class="hl-2">      │</span><br/><span class="hl-2">│ </span><span class="hl-8">11</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-3">&#39;New Brunswick&#39;</span><span class="hl-2">             │ </span><span class="hl-8">202</span><span class="hl-2">     │ </span><span class="hl-8">854</span><span class="hl-2">       │</span><br/><span class="hl-2">│ </span><span class="hl-8">12</span><span class="hl-2">      │ </span><span class="hl-3">&#39;hectares&#39;</span><span class="hl-2"> │ </span><span class="hl-4">null</span><span class="hl-2">                        │ </span><span class="hl-8">124</span><span class="hl-2">     │ </span><span class="hl-8">258</span><span class="hl-2">       │</span><br/><span class="hl-2">└─────────┴────────────┴─────────────────────────────┴─────────┴───────────┘</span><br/><span class="hl-8">13</span><span class="hl-2"> </span><span class="hl-6">rows</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-1">total</span><span class="hl-2"> (</span><span class="hl-6">nbRowsToLog</span><span class="hl-2">: </span><span class="hl-8">13</span><span class="hl-2">)</span><br/><br/><span class="hl-6">SimpleDB</span><span class="hl-2"> - </span><span class="hl-6">Done</span><span class="hl-2"> </span><span class="hl-4">in</span><span class="hl-2"> </span><span class="hl-8">594</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> / </span><span class="hl-6">You</span><span class="hl-2"> </span><span class="hl-6">saved</span><span class="hl-2"> </span><span class="hl-8">297</span><span class="hl-2"> </span><span class="hl-6">ms</span><span class="hl-2"> </span><span class="hl-6">by</span><span class="hl-2"> </span><span class="hl-4">using</span><span class="hl-2"> </span><span class="hl-7">the</span><span class="hl-2"> cache</span>
</code><button>Copy</button></pre>

<a id="md:in-observable-notebooks" class="tsd-anchor"></a><h2 class="tsd-anchor-link">In Observable notebooks<a href="#md:in-observable-notebooks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Observable notebooks are great for data analysis in JavaScript.</p>
<p>In this <a href="https://observablehq.com/@nshiab/hello-simple-data-analysis?collection=@nshiab/simple-data-analysis-in-javascript" target="_blank" class="external">example</a>, we calculate the average temperature per decade in three cities and check for trends. We will also join two tables to retrieve the names of the cities.</p>
<p>This <a href="https://observablehq.com/@nshiab/hello-simple-data-analysis-and-geospatial-data?collection=@nshiab/simple-data-analysis-in-javascript" target="_blank" class="external">other example</a> focuses on geospatial analysis. We create point geometries from the latitude and longitude of 2023 wildfires in Canada, do a spatial join with provinces' boundaries, and then compute the number of fires and the total area burnt per province.</p>
<a id="md:in-web-apps-or-html-pages" class="tsd-anchor"></a><h2 class="tsd-anchor-link">In Web apps or HTML pages<a href="#md:in-web-apps-or-html-pages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you are developing a web application, you'll need to install <code>@duckdb/duckdb-wasm</code>:</p>
<pre><code><span class="hl-6">npm</span><span class="hl-2"> </span><span class="hl-6">i</span><span class="hl-2"> @</span><span class="hl-6">duckdb</span><span class="hl-2">/</span><span class="hl-6">duckdb</span><span class="hl-2">-</span><span class="hl-6">wasm</span>
</code><button>Copy</button></pre>

<p>Then import <code>SimpleWebDB</code> or <code>SimpleWebTable</code> directly from <code>bundle.js</code>:</p>
<pre><code class="js"><span class="hl-5">import</span><span class="hl-2"> { </span><span class="hl-6">SimpleWebDB</span><span class="hl-2"> } </span><span class="hl-5">from</span><span class="hl-2"> </span><span class="hl-3">&quot;./node_modules/simple-data-analysis/dist/bundle.js&quot;</span>
</code><button type="button">Copy</button></pre>

<p>You can also import the minified bundle with a npm-based CDN like <a href="https://esm.sh/" target="_blank" class="external">esm.sh</a>.</p>
<p>You'll find an example <a href="https://github.com/nshiab/simple-data-analysis/blob/main/examples/index.html" target="_blank" class="external">here</a>. You can copy and paste the code into an HTML file. You can also adapt it to any bundler or framework of your choice.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:simple-data-analysis-sda"><span>Simple data analysis (SDA)</span></a><ul><li><a href="#md:quick-setup"><span>Quick setup</span></a></li><li><a href="#md:manual-installation"><span>Manual installation</span></a></li><li><a href="#md:core-principles"><span>Core principles</span></a></li><li><a href="#md:performance"><span>Performance</span></a></li><li><ul><li><a href="#md:small-file"><span>Small file</span></a></li><li><a href="#md:big-file"><span>Big file</span></a></li></ul></li><li><a href="#md:example"><span>Example</span></a></li><li><a href="#md:caching-fetched-and-computed-data"><span>Caching fetched and computed data</span></a></li><li><a href="#md:in-observable-notebooks"><span>In <wbr/>Observable notebooks</span></a></li><li><a href="#md:in-web-apps-or-html-pages"><span>In <wbr/>Web apps or HTML pages</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Simple-data-analysis - v3.12.2</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
